{"ast":null,"code":"import _toConsumableArray from \"/Users/marwan01/Desktop/Athlytics/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"/Users/marwan01/Desktop/Athlytics/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/marwan01/Desktop/Athlytics/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/marwan01/Desktop/Athlytics/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/marwan01/Desktop/Athlytics/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/marwan01/Desktop/Athlytics/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/marwan01/Desktop/Athlytics/src/components/Calendar/index.js\";\nimport React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport * as ROUTES from '../../constants/routes';\nimport * as ROLES from '../../constants/roles';\nimport { withAuthorization, withEmailVerification, AuthUserContext } from '../Session';\nimport BigCalendar from 'react-big-calendar';\nimport moment from 'moment';\nimport events from './events';\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport { Header } from 'semantic-ui-react';\n\nvar Calendar =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(Calendar, _React$Component);\n\n  function Calendar() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, Calendar);\n\n    for (var _len = arguments.length, props = new Array(_len), _key = 0; _key < _len; _key++) {\n      props[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(Calendar)).call.apply(_getPrototypeOf2, [this].concat(props)));\n\n    _this.getEvents = function () {\n      var token = JSON.parse(localStorage.getItem('authUser'));\n\n      _this.props.firebase.user(token.uid).once('value').then(function (snapshot) {\n        var dbUser = snapshot.val();\n        var w = dbUser.workouts;\n\n        if (w) {\n          var newArrayDataOfOjbect = Object.values(w);\n          newArrayDataOfOjbect.forEach(function (element) {\n            element.end = new Date(element.end);\n            element.start = new Date(element.start);\n          });\n\n          _this.setState({\n            events: newArrayDataOfOjbect\n          });\n        }\n      });\n    };\n\n    _this.handleSelect = function (_ref) {\n      var start = _ref.start,\n          end = _ref.end;\n      var title = window.prompt('New Event name');\n      if (title) _this.setState({\n        events: _toConsumableArray(_this.state.events).concat([{\n          start: start,\n          end: end,\n          title: title\n        }])\n      });\n    };\n\n    _this.state = {\n      events: events\n    };\n    return _this;\n  }\n\n  _createClass(Calendar, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.getEvents();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var localizer = BigCalendar.momentLocalizer(moment); // or globalizeLocalizer\n\n      return React.createElement(AuthUserContext.Consumer, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }, function (authUser) {\n        return React.createElement(\"div\", {\n          style: {\n            height: '750px'\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64\n          },\n          __self: this\n        }, React.createElement(Header, {\n          as: \"h2\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 65\n          },\n          __self: this\n        }, authUser.username, \"'s Calendar\"), React.createElement(BigCalendar, {\n          selectable: true,\n          localizer: localizer,\n          startAccessor: \"start\",\n          endAccessor: \"end\",\n          events: _this2.state.events,\n          view: BigCalendar.Views.AGENDA,\n          defaultView: BigCalendar.Views.AGENDA,\n          scrollToTime: new Date(1970, 1, 1, 6),\n          defaultDate: new Date(2019, 3, 12),\n          onSelectEvent: function onSelectEvent(event) {\n            return alert(event.title);\n          },\n          onSelectSlot: _this2.handleSelect,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }));\n      });\n    }\n  }]);\n\n  return Calendar;\n}(React.Component); // Setup the localizer by providing the moment (or globalize) Object\n// to the correct localizer.\n\n\nvar condition = function condition(authUser) {\n  return authUser && authUser.roles.includes(ROLES.ADMIN);\n};\n\nexport default compose(withEmailVerification, withAuthorization(condition))(Calendar);","map":{"version":3,"sources":["/Users/marwan01/Desktop/Athlytics/src/components/Calendar/index.js"],"names":["React","Switch","Route","compose","ROUTES","ROLES","withAuthorization","withEmailVerification","AuthUserContext","BigCalendar","moment","events","Header","Calendar","props","getEvents","token","JSON","parse","localStorage","getItem","firebase","user","uid","once","then","snapshot","dbUser","val","w","workouts","newArrayDataOfOjbect","Object","values","forEach","element","end","Date","start","setState","handleSelect","title","window","prompt","state","localizer","momentLocalizer","authUser","height","username","Views","AGENDA","event","alert","Component","condition","roles","includes","ADMIN"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Switch, Route } from 'react-router-dom';\nimport { compose } from 'recompose';\nimport * as ROUTES from '../../constants/routes';\nimport * as ROLES from '../../constants/roles';\nimport { withAuthorization, withEmailVerification,AuthUserContext } from '../Session';\nimport BigCalendar from 'react-big-calendar'\nimport moment from 'moment'\nimport events from './events'\nimport 'react-big-calendar/lib/css/react-big-calendar.css';\nimport {\n  Header,\n} from 'semantic-ui-react';\n\nclass Calendar extends React.Component {\n  constructor(...props) {\n    super(...props)\n\n    this.state = { events }\n  }\ncomponentDidMount(){\n  this.getEvents()\n}\n  getEvents = () =>{\n    let token = JSON.parse(localStorage.getItem('authUser'))\n    this.props.firebase.user(token.uid)\n    .once('value')\n    .then(snapshot => {\n      const dbUser = snapshot.val();\n      let w = dbUser.workouts\n      if (w){\n        var newArrayDataOfOjbect = Object.values(w)\n        newArrayDataOfOjbect.forEach(function(element) {\n          element.end = new Date(element.end)\n          element.start = new Date(element.start)\n          \n        });\n        this.setState({events: newArrayDataOfOjbect})\n      }\n    });\n\n  }\n\n  handleSelect = ({ start, end }) => {\n    const title = window.prompt('New Event name')\n    if (title)\n      this.setState({\n        events: [\n          ...this.state.events,\n          {\n            start,\n            end,\n            title,\n          },\n        ],\n      })\n  }\n\n  render() {\n    const localizer = BigCalendar.momentLocalizer(moment) // or globalizeLocalizer\n    return (\n          <AuthUserContext.Consumer>\n    {authUser => (\n      <div style={{height:'750px'}}>\n        <Header as=\"h2\">{authUser.username}'s Calendar</Header>\n      <BigCalendar\n          selectable\n          localizer={localizer}\n          startAccessor=\"start\"\n          endAccessor=\"end\"\n          events={this.state.events}\n          view={BigCalendar.Views.AGENDA}\n          defaultView={BigCalendar.Views.AGENDA}\n          scrollToTime={new Date(1970, 1, 1, 6)}\n          defaultDate={new Date(2019, 3, 12)}\n          onSelectEvent={event => alert(event.title)} \n          onSelectSlot={this.handleSelect}\n        />\n      </div>\n    )}\n  </AuthUserContext.Consumer>\n      \n    )\n  }\n}\n\n\n// Setup the localizer by providing the moment (or globalize) Object\n// to the correct localizer.\n\n\n\n\nconst condition = authUser =>\n  authUser && authUser.roles.includes(ROLES.ADMIN);\n\nexport default compose(\n  withEmailVerification,\n  withAuthorization(condition),\n)(Calendar);\n"]},"metadata":{},"sourceType":"module"}